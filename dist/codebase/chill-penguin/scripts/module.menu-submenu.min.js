"use strict";chill_penguin.module("menu_submenu",(()=>{let e,t={};return{initialize:()=>{e=chill_penguin.menu_submenu,t={},e.setup()},setup:()=>{document.querySelectorAll('[data-module="menu"]').forEach((i=>{const s=i.getAttribute("id");t[s]={el:i,all_triggers:i.querySelectorAll(':scope > li > [data-module="menu.trigger"],:scope > [data-module="menu.trigger"]'),all_submenus:i.querySelectorAll(':scope > li > [data-module="menu.submenu"],:scope > [data-module="menu.submenu"]'),active_setting:i.getAttribute("data-menu-active"),active_classes:i.getAttribute("data-menu-active-classes")?JSON.parse(i.getAttribute("data-menu-active-classes").split(",")):[],inactive_classes:i.getAttribute("data-menu-inactive-classes")?JSON.parse(i.getAttribute("data-menu-inactive-classes").split(",")):[],open_on_load:i.querySelectorAll(':scope > li > [data-module="menu.trigger"][data-menu-open],:scope > [data-module="menu.trigger"][data-menu-open]')},e.ui.initialize(s),e.event_listeners.initialize(s)}))},ui:{initialize:i=>{const{el:s,all_triggers:a,all_submenus:n,inactive_classes:l}=t[i];a.forEach(((t,i)=>{t.setAttribute("tabindex","-1"),t.setAttribute("aria-expanded","false"),t.setAttribute("aria-controls",t.nextElementSibling.getAttribute("id")),t.classList.add(...l),0===i&&(t.setAttribute("tabindex","0"),t.removeEventListener("focusin",e.event_listeners.menu_focus.add),t.addEventListener("focusin",e.event_listeners.menu_focus.add),t.removeEventListener("focusout",e.event_listeners.menu_focus.remove),t.addEventListener("focusout",e.event_listeners.menu_focus.remove))})),n.forEach((e=>{e.classList.add("display:none")})),e.ui.initialize_initial_active(i)},initialize_initial_active:i=>{const{open_on_load:s}=t[i];s.forEach((t=>{e.action.toggle_trigger(i,t)}))}},event_listeners:{initialize:i=>{const{el:s,all_triggers:a}=t[i];a.forEach((t=>{t.removeEventListener("click",e.event_listeners.trigger_click),t.addEventListener("click",e.event_listeners.trigger_click)}))},menu_focus:{add:e=>{e.currentTarget.classList.add("focus")},remove:e=>{e.currentTarget.classList.remove("focus")}},trigger_click:t=>{const i=t.currentTarget,s=chill_penguin.util.closest_parent(i,"[data-module='menu']").getAttribute("id");e.action.toggle_trigger(s,i)}},action:{toggle_trigger:(i,s)=>{const{all_triggers:a,active_setting:n,active_classes:l,inactive_classes:r}=t[i];"single"===n?(a.forEach((e=>{e.classList.remove(...l),e.classList.add(...r),e.setAttribute("aria-expanded","false")})),s.setAttribute("aria-expanded","true"),s.classList.add(...l),s.classList.remove(...r)):"multiple"===n&&("false"===s.getAttribute("aria-expanded")?(s.setAttribute("aria-expanded","true"),s.classList.add(...l),s.classList.remove(...r)):(s.setAttribute("aria-expanded","false"),s.classList.remove(...l),s.classList.add(...r))),e.action.open(i,s.getAttribute("aria-controls"))},open:(e,i)=>{const{el:s,all_submenus:a,active_setting:n}=t[e];"single"===n?(a.forEach((e=>{e.classList.add("display:none")})),document.getElementById(i).classList.remove("display:none"),chill_penguin.equalize_heights.force_resize()):"multiple"===n&&(document.getElementById(i).classList.toggle("display:none"),chill_penguin.equalize_heights.force_resize())}},a11y:{}}}));