"use strict";chill_penguin.module("dialog",(()=>{let e,t,o={};return{initialize:()=>{e=chill_penguin.dialog,o={},e.setup()},setup:()=>{document.querySelectorAll("[data-module='dialog']").forEach((t=>{const l=t.getAttribute("id");o[l]={el:t,container:t.querySelector(':scope > [data-module="dialog.container"]'),focusable_elements:[],remove_focusable_elements:[]},e.a11y.get_focusable_elements(l)}))},event_listeners:{mousedown_close:t=>{t.target.querySelector("[data-module='dialog'], [data-module='dialog'] > *")&&e.action.close()},keyboard_focus_trap:t=>{t.keyCode===keyboard.keys.tab&&(t.shiftKey?document.activeElement===e.a11y.first_tab_stop&&(t.preventDefault(),e.a11y.last_tab_stop.focus()):document.activeElement===e.a11y.last_tab_stop&&(t.preventDefault(),e.a11y.first_tab_stop.focus())),t.keyCode===keyboard.keys.esc&&e.action.close()}},action:{open:(l,n)=>{if(o[l]){const{el:n,container:s,focusable_elements:r,remove_focusable_elements:a}=o[l];document.removeEventListener("mousedown",e.event_listeners.mousedown_close),document.addEventListener("mousedown",e.event_listeners.mousedown_close),r.forEach((e=>{e.setAttribute("tabindex","0")})),a.forEach((e=>{e.setAttribute("tabindex","-1")})),o[l].focusable_elements=[...r].filter((e=>![...a].includes(e))),e.a11y.focus_placeholder=document.activeElement,e.a11y.first_tab_stop=r[0],e.a11y.last_tab_stop=r[r.length-1],t=document.documentElement.scrollTop||document.body.scrollTop,document.documentElement.style.top=`-${t}px`,document.documentElement.classList.add("no-scroll"),n.showModal(),setTimeout((()=>{e.a11y.first_tab_stop&&e.a11y.first_tab_stop.focus()}),100),n.removeEventListener("keydown",e.event_listeners.keyboard_focus_trap),n.addEventListener("keydown",e.event_listeners.keyboard_focus_trap)}else console.error(`Dialog (id="${l}") does not exist`)},close:()=>{document.removeEventListener("mousedown",e.event_listeners.mousedown_close),document.documentElement.classList.remove("no-scroll"),document.documentElement.style.removeProperty("top"),window.scrollTo(0,t),document.querySelectorAll("dialog").forEach((e=>{e.close()})),document.querySelectorAll("[data-module='dialog']").forEach(((t,l)=>{const n=t.getAttribute("id"),{focusable_elements:s}=o[n];s.forEach((e=>{e.setAttribute("tabindex","-1")})),t.removeEventListener("keydown",e.event_listeners.keyboard_focus_trap)})),document.querySelectorAll("[data-module='dialog.trigger']").forEach((e=>{e.setAttribute("aria-expanded",!1)})),e.a11y.focus_placeholder.focus()}},a11y:{focus_placeholder:null,first_tab_stop:null,last_tab_stop:null,get_focusable_elements:e=>{const{el:t}=o[e];o[e].focusable_elements=t.querySelectorAll(focus_trap_selector),o[e].remove_focusable_elements=t.querySelectorAll(remove_focus_selector)}}}})),chill_penguin.module("dialog_trigger",(()=>{let e;return{initialize:()=>{e=chill_penguin.dialog_trigger,document.querySelectorAll("[data-module='dialog.trigger']").forEach((t=>{e.event_listeners.initialize(t)}))},event_listeners:{initialize:t=>{t.removeEventListener("click",e.event_listeners.trigger_open),t.addEventListener("click",e.event_listeners.trigger_open)},remove:{all:()=>{document.querySelectorAll("[data-module='dialog.trigger']").forEach((t=>{t.removeEventListener("click",e.event_listeners.trigger_open)}))},one:t=>{t.removeEventListener("click",e.event_listeners.trigger_open)}},trigger_open:e=>{const t=e.currentTarget;chill_penguin.dialog.action.open(t.getAttribute("data-dialog-bind-id"),t)}}}}));