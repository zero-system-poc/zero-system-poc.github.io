"use strict";chill_penguin.module("form.parent_checkbox",(()=>{let e,t={};return{initialize:()=>{e=chill_penguin.form.parent_checkbox,t={},e.setup()},setup:()=>{document.querySelectorAll("[data-module='parent-checkbox']").forEach((n=>{const c=n.getAttribute("id"),i=n.getAttribute("aria-controls").split(" ");t[c]={},t[c][c]=chill_penguin.checkbox.is_checked(document.getElementById(c)),e.event_listeners.parent.initialize(c);for(let n=0;n<i.length;n++)t[c][i[n]]=chill_penguin.checkbox.is_checked(document.getElementById(i[n])),e.event_listeners.child.initialize(c,document.getElementById(i[n]))}))},event_listeners:{parent:{initialize:t=>{const n=document.getElementById(t);n.removeEventListener("keydown",e.event_listeners.parent.update),n.addEventListener("keydown",e.event_listeners.parent.update),n.removeEventListener("click",e.event_listeners.parent.update),n.addEventListener("click",e.event_listeners.parent.update)},update:t=>{const n=t.currentTarget.getAttribute("id");e.state.update(n,n)}},child:{initialize:(t,n)=>{n.removeEventListener("change",e.event_listeners.child.update),n.addEventListener("change",e.event_listeners.child.update),n.removeEventListener("keydown",e.event_listeners.child.update),n.addEventListener("keydown",e.event_listeners.child.update),n.removeEventListener("click",e.event_listeners.child.update),n.addEventListener("click",e.event_listeners.child.update)},update:t=>{const n=t.currentTarget,c=chill_penguin.util.closest_parent(n,'[data-module="parent-checkbox.container"]').querySelector('[data-module="parent-checkbox"]').getAttribute("id"),i=n.getAttribute("id");e.state.update(c,i)}}},state:{update:(n,c)=>{const i=document.getElementById(n),d=document.getElementById(c);if(n===c){if(!1===chill_penguin.checkbox.is_checked(i))for(const[e,c]of Object.entries(t[n]))t[n][e]=!1,chill_penguin.checkbox.set_checked(document.getElementById(e),!1);else if(!0===chill_penguin.checkbox.is_checked(i))for(const[e,c]of Object.entries(t[n]))t[n][e]=!0,chill_penguin.checkbox.set_checked(document.getElementById(e),!0)}else!0===chill_penguin.checkbox.is_checked(d)?(t[n][c]=!1,chill_penguin.checkbox.set_checked(d,!1)):!1===chill_penguin.checkbox.is_checked(d)&&(t[n][c]=!0,chill_penguin.checkbox.set_checked(d,!0));e.state.parent(n)},parent:e=>{const n=document.getElementById(e);let c=0,i=0;for(const[n,d]of Object.entries(t[e]))i>0&&chill_penguin.checkbox.is_checked(document.getElementById(n))&&(c+=1),i+=1;0===c?(n.setAttribute("aria-checked","false"),n.checked=!1):c===i-1?(n.setAttribute("aria-checked","true"),n.checked=!0):(n.setAttribute("aria-checked","mixed"),n.checked=!0)}}}}));