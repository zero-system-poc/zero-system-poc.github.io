"use strict";chill_penguin.module("carousel",(()=>{let e,t={};return{initialize:()=>{e=chill_penguin.carousel,t={},e.setup()},setup:()=>{document.querySelectorAll('[data-module="carousel"]').forEach((i=>{const r=i.getAttribute("id");t[r]={el:i,item_group:i.querySelector('[data-module="carousel.item-group"]'),items:i.querySelectorAll('[data-module="carousel.item"]:not(.display\\:none)'),item_width:"",indicators_group:i.querySelector('[data-module="carousel.indicators-group"]'),indicators_group_controls:i.querySelectorAll('[data-module="carousel.indicators-group"] > [data-carousel-indicator-control]'),controls:i.querySelectorAll('[data-module="carousel.controls"]'),controls_prev:i.querySelector('[data-module="carousel.controls"][data-carousel-control-prev]'),controls_next:i.querySelector('[data-module="carousel.controls"][data-carousel-control-next]'),control_active_classes:i.getAttribute("data-carousel-control-active-classes")?JSON.parse(i.getAttribute("data-carousel-control-active-classes")):[],control_inactive_classes:i.getAttribute("data-carousel-control-inactive-classes")?JSON.parse(i.getAttribute("data-carousel-control-inactive-classes")):[],control_class_queryselector:i.getAttribute("data-carousel-control-class-selector")||"",breakpoint:i.getAttribute("data-carousel-breakpoint"),transition_duration_array:JSON.parse(i.getAttribute("data-carousel-transition-duration")),transition_duration:"",number_of_active_array:JSON.parse(i.getAttribute("data-carousel-number-active")),number_of_active:"",offset_left_array:JSON.parse(i.getAttribute("data-carousel-offset")),offset_left:"",current_active_carousel_item:parseInt(i.getAttribute("data-carousel-item-active"))||0},e.ui.update(r),e.event_listeners.resize.initialize(r)}))},state:{update:t=>{e.state.reinitiailize(t),e.state.set_offset_left(t),e.state.set_number_of_active(t),e.state.set_transition_duration(t),e.state.set_indicators(t),e.state.set_item_width(t)},reinitiailize:e=>{const{el:i}=t[e];t[e].items=i.querySelectorAll('[data-module="carousel.item"]:not(.display\\:none)'),t[e].transition_duration_array=JSON.parse(i.getAttribute("data-carousel-transition-duration")),t[e].number_of_active_array=JSON.parse(i.getAttribute("data-carousel-number-active")),t[e].offset_left_array=JSON.parse(i.getAttribute("data-carousel-offset"))},set_breakpoint:e=>{const{el:i}=t[e];t[e].breakpoint=i.getAttribute("data-carousel-breakpoint")},set_offset_left:e=>{const{el:i,offset_left_array:r}=t[e],a=(e,t)=>t>1?t:t>0&&t<1?i.offsetWidth*t:0;chill_penguin.client.viewport.is_sm_only()?t[e].offset_left=a(0,r[0]):chill_penguin.client.viewport.is_md_only()?t[e].offset_left=a(0,r[1]):chill_penguin.client.viewport.is_lg_only()?t[e].offset_left=a(0,r[2]):chill_penguin.client.viewport.is_xl_up()&&(t[e].offset_left=a(0,r[3]))},set_number_of_active:e=>{const{number_of_active_array:i}=t[e];chill_penguin.client.viewport.is_sm_only()?t[e].number_of_active=i[0]:chill_penguin.client.viewport.is_md_only()?t[e].number_of_active=i[1]:chill_penguin.client.viewport.is_lg_only()?t[e].number_of_active=i[2]:chill_penguin.client.viewport.is_xl_up()&&(t[e].number_of_active=i[3])},set_transition_duration:e=>{const{transition_duration_array:i}=t[e];chill_penguin.client.viewport.is_sm_only()?t[e].transition_duration=i[0]:chill_penguin.client.viewport.is_md_only()?t[e].transition_duration=i[1]:chill_penguin.client.viewport.is_lg_only()?t[e].transition_duration=i[2]:chill_penguin.client.viewport.is_xl_up()&&(t[e].transition_duration=i[3])},set_indicators:e=>{const{el:i,items:r,indicators_group:a,number_of_active:n,current_active_carousel_item:s}=t[e];a.innerHTML="";for(let e=0;e<=r.length-n;e++)a.innerHTML+=`<button name="carousel-control-button" data-carousel-indicator-control class="cursor:pointer"><span class="show-for-sr">Go to slide #${e+1}</button>`;t[e].indicators_group_controls=i.querySelectorAll('[data-module="carousel.indicators-group"] > [data-carousel-indicator-control]'),t[e].indicators_group_controls[s].setAttribute("data-carousel-indicator-active","true")},set_item_width:e=>{const{el:i,item_group:r,items:a,number_of_active:n,offset_left:s}=t[e],l=(i.offsetWidth-2*s)/n;t[e].item_width=l,a.forEach((e=>{e.style.width=`${l}px`})),r.style.width=`${s+l*a.length}px`}},ui:{is_active:i=>{e.state.set_breakpoint(i);const{breakpoint:r}=t[i];switch(r){case"":return!0;case"sm=":return chill_penguin.client.viewport.is_sm_only();case"sm+":return chill_penguin.client.viewport.is_sm_up();case"md-":return chill_penguin.client.viewport.is_md_down();case"md=":return chill_penguin.client.viewport.is_md_only();case"md+":return chill_penguin.client.viewport.is_md_up();case"lg-":return chill_penguin.client.viewport.is_lg_down();case"lg=":return chill_penguin.client.viewport.is_lg_only();case"lg+":return chill_penguin.client.viewport.is_lg_up();case"xl+":return chill_penguin.client.viewport.is_xl_up();default:return!1}},update:t=>{e.ui.is_active(t)?(e.state.update(t),e.ui.activate(t)):e.ui.disable(t)},activate:t=>{e.event_listeners.initialize(t),e.ui.active_items.enable(t),e.ui.indicators_group.enable(t),e.ui.controls.enable(t),e.ui.item_group_position.enable(t),e.ui.transition.enable(t),e.a11y.focusable_elements.enable(t)},disable:t=>{e.ui.active_items.disable(t),e.ui.indicators_group.disable(t),e.ui.controls.disable(t),e.ui.item_group_position.disable(t),e.a11y.focusable_elements.disable(t)},active_items:{enable:e=>{const{el:i,item_group:r,items:a,indicators_group_controls:n,number_of_active:s,offset_left:l,item_width:o,current_active_carousel_item:c,transition_duration:u}=t[e];i.setAttribute("data-carousel-active","true"),a.forEach((e=>{e.setAttribute("data-carousel-item-active",""),e.setAttribute("data-carousel-item-secondary-active","false")})),a[c].setAttribute("data-carousel-item-active","true"),a[c].setAttribute("data-carousel-item-secondary-active","true");for(let e=0;e<s;e++)a[c+e].setAttribute("data-carousel-item-secondary-active","true");n.forEach((e=>{e.setAttribute("data-carousel-indicator-active","")})),n[c].setAttribute("data-carousel-indicator-active","true")},disable:e=>{const{el:i}=t[e];i.setAttribute("data-carousel-active","")}},indicators_group:{enable:e=>{},disable:e=>{}},controls:{enable:e=>{const{items:i,controls_next:r,controls_prev:a,control_active_classes:n,control_inactive_classes:s,control_class_queryselector:l,breakpoint:o,current_active_carousel_item:c,number_of_active:u}=t[e];let _,d;l?(_=a.querySelector(l),d=r.querySelector(l)):(_=a,d=r),1!==i.length&&(a.removeAttribute("disabled"),r.removeAttribute("disabled"),_.classList.remove(...s),d.classList.remove(...s),_.classList.add(...n),d.classList.add(...n)),0===c?(a.setAttribute("disabled",""),_.classList.add(...s),_.classList.remove(...n)):c===i.length-u&&(r.setAttribute("disabled",""),d.classList.add(...s),d.classList.remove(...n))},disable:e=>{}},item_group_position:{enable:e=>{const{item_group:i,item_width:r,offset_left:a,current_active_carousel_item:n}=t[e];i.style.left=a-n*r+"px"},disable:e=>{const{item_group:i,items:r}=t[e];i.style.left=0,i.style.width="100%",i.style.height="auto",r.forEach((e=>{e.style.removeProperty("width")}))}},transition:{enable:e=>{const{item_group:i,transition_duration:r}=t[e];setTimeout((()=>{i.style.transitionDuration="0s"}),1e3*r)}}},event_listeners:{initialize:t=>{e.event_listeners.indicator.initialize(t),e.event_listeners.control_buttons.initialize(t),e.event_listeners.swipe.initialize(t)},indicator:{initialize:i=>{const{indicators_group_controls:r}=t[i];r.forEach((t=>{t.removeEventListener("click",e.event_listeners.indicator.handle_change),t.addEventListener("click",e.event_listeners.indicator.handle_change)}))},handle_change:i=>{i.preventDefault();const r=chill_penguin.util.closest_parent(i.currentTarget,'[data-module="carousel"]').getAttribute("id"),{item_group:a,transition_duration:n}=t[r];a.style.transitionDuration=`${n}s`,t[r].current_active_carousel_item=chill_penguin.util.index_in_parent(i.currentTarget),e.ui.update(r)}},control_buttons:{initialize:i=>{const{controls_prev:r,controls_next:a}=t[i];a.removeEventListener("click",e.event_listeners.control_buttons.handle_swipe_left),a.addEventListener("click",e.event_listeners.control_buttons.handle_swipe_left),r.removeEventListener("click",e.event_listeners.control_buttons.handle_swipe_right),r.addEventListener("click",e.event_listeners.control_buttons.handle_swipe_right)},handle_swipe_left:e=>{e.preventDefault();const i=chill_penguin.util.closest_parent(e.currentTarget,'[data-module="carousel"]').getAttribute("id"),{item_group:r}=t[i];r.dispatchEvent(new Event("swiped-left"))},handle_swipe_right:e=>{e.preventDefault();const i=chill_penguin.util.closest_parent(e.currentTarget,'[data-module="carousel"]').getAttribute("id"),{item_group:r}=t[i];r.dispatchEvent(new Event("swiped-right"))}},resize:{initialize:i=>{const{el:r}=t[i];chill_penguin.resize_observer(r,(()=>e.ui.update(i)))}},swipe:{initialize:i=>{const{item_group:r}=t[i];r.removeEventListener("swiped-left",e.event_listeners.swipe.handle_swiped_left),r.addEventListener("swiped-left",e.event_listeners.swipe.handle_swiped_left),r.removeEventListener("swiped-right",e.event_listeners.swipe.handle_swiped_right),r.addEventListener("swiped-right",e.event_listeners.swipe.handle_swiped_right)},handle_swiped_left:i=>{const r=chill_penguin.util.closest_parent(i.currentTarget,'[data-module="carousel"]').getAttribute("id"),{item_group:a,items:n,transition_duration:s,number_of_active:l,current_active_carousel_item:o}=t[r];a.style.transitionDuration=`${s}s`,t[r].current_active_carousel_item!==n.length-l&&(t[r].current_active_carousel_item++,e.ui.update(r))},handle_swiped_right:i=>{const r=chill_penguin.util.closest_parent(i.currentTarget,'[data-module="carousel"]').getAttribute("id"),{item_group:a,transition_duration:n}=t[r];a.style.transitionDuration=`${n}s`,0!==t[r].current_active_carousel_item&&(t[r].current_active_carousel_item--,e.ui.update(r))}}},a11y:{focusable_elements:{enable:e=>{const{el:i}=t[e];i.querySelectorAll('[data-carousel-item-secondary-active="false"]').forEach((e=>{e.querySelectorAll(focus_trap_selector).forEach((e=>{e.setAttribute("tabindex","-1"),e.setAttribute("disabled","true")}))})),i.querySelectorAll('[data-carousel-item-secondary-active="true"]').forEach((e=>{e.querySelectorAll("*").forEach((e=>{"-1"===e.getAttribute("tabindex")&&e.setAttribute("tabindex","0"),e.removeAttribute("disabled")}))})),i.querySelectorAll('[data-carousel-item-secondary-active="true"]').forEach((e=>{e.querySelectorAll(remove_focus_selector).forEach((e=>{e.setAttribute("tabindex","0"),e.removeAttribute("disabled")}))})),chill_penguin.dialog&&chill_penguin.dialog.initialize()},disable:e=>{const{items:i}=t[e];i.forEach((e=>{e.querySelectorAll(remove_focus_selector).forEach((e=>{e.setAttribute("tabindex","0"),e.removeAttribute("disabled")}))}))}}}}}));