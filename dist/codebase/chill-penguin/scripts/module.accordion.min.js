"use strict";chill_penguin.module("accordion",(()=>{let e,t={};return{initialize:()=>{e=chill_penguin.accordion,t={},e.setup()},setup:()=>{document.querySelectorAll('[data-module="accordion"]').forEach((i=>{const a=i.getAttribute("id");t[a]={el:i,all_headers:i.querySelectorAll(':scope > div > * > [data-module="accordion.header"],:scope > [data-module="accordion.header"]'),all_panels:i.querySelectorAll(':scope > div > [data-module="accordion.panel"],:scope > [data-module="accordion.panel"]'),active_setting:i.getAttribute("data-accordion-active"),initial_active:JSON.parse(i.getAttribute("data-accordion-initial"))},e.ui.initialize(a),e.event_listeners.initialize(a)}))},ui:{initialize:i=>{const{el:a,all_headers:n,all_panels:o,initial_active:c}=t[i];n.forEach(((t,i)=>{const a=t.parentNode.nextElementSibling;t.setAttribute("aria-expanded","false"),t.setAttribute("aria-controls",a.getAttribute("id")),a.setAttribute("aria-labelledby",t.getAttribute("id")),0===i&&(t.removeEventListener("focusin",e.event_listeners.header.focus.focus_class.add),t.addEventListener("focusin",e.event_listeners.header.focus.focus_class.add),t.removeEventListener("focusout",e.event_listeners.header.focus.focus_class.remove),t.addEventListener("focusout",e.event_listeners.header.focus.focus_class.remove)),c[i]&&t.setAttribute("aria-expanded","true")})),o.forEach(((t,i)=>{t.style.height="0px",t.setAttribute("data-accordion-panel","hide"),c[i]&&e.ui.animate_panel_open(t,!0)}))},animate_panel_open:(e,t)=>{if(e.style.height="auto",!t){let t=e.scrollHeight+"px";e.style.height="0px",requestAnimationFrame((()=>{e.style.height=t,setTimeout((()=>{e.style.height="auto"}),250)}))}e.setAttribute("data-accordion-panel","")},animate_panel_close:e=>{e.style.height=e.scrollHeight+"px",requestAnimationFrame((()=>{e.style.height="0px"})),e.setAttribute("data-accordion-panel","hide")}},event_listeners:{initialize:i=>{const{all_headers:a}=t[i];a.forEach((t=>{t.removeEventListener("click",e.event_listeners.header.click.update_accordion_item),t.addEventListener("click",e.event_listeners.header.click.update_accordion_item)}))},header:{click:{update_accordion_item:t=>{const i=t.currentTarget,a=chill_penguin.util.closest_parent(i,"[data-module='accordion']").getAttribute("id");e.action.toggle_accordion_item(a,i)}},focus:{focus_class:{add:e=>{e.currentTarget.classList.add("focus")},remove:e=>{e.currentTarget.classList.remove("focus")}}}}},action:{toggle_accordion_item:(i,a)=>{const{all_headers:n,all_panels:o,active_setting:c}=t[i],l="true"===a.getAttribute("aria-expanded"),r=a.getAttribute("aria-controls"),s=document.getElementById(r);"single"===c&&(n.forEach((e=>e.setAttribute("aria-expanded","false"))),o.forEach((t=>e.ui.animate_panel_close(t)))),a.setAttribute("aria-expanded",!l),l?e.ui.animate_panel_close(s):e.ui.animate_panel_open(s),chill_penguin.equalize_heights.force_resize()},open:(e,i)=>{if(t[e]){const{active_setting:a,all_panels:n}=t[e];if("single"===a)n.forEach((e=>{e.setAttribute("data-accordion-panel","hide")})),document.getElementById(i).setAttribute("data-accordion-panel",""),chill_penguin.equalize_heights.force_resize();else if("multiple"===a){const e=document.getElementById(i);e.setAttribute("data-accordion-panel","hide"===e.getAttribute("data-accordion-panel")?"":"hide"),chill_penguin.equalize_heights.force_resize()}}else console.error(`Accordion (id="${e}") does not exist`)}}}}));